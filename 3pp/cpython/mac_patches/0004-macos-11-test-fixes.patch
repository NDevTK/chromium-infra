From bf266d68cfe66e414cc9a8bbf78d55792a59e3cd Mon Sep 17 00:00:00 2001
From: Lawrence D'Anna <lawrence_danna@apple.com>
Date: Wed, 1 Jul 2020 10:06:11 -0700
Subject: [PATCH 1/3] test fixes for Mac OS 11

test_platform: add arm64 to list of expected arches on Mac OS

test_distutils: don't assume Mac OS major version is always 10
---
 Lib/distutils/tests/test_build_ext.py | 2 +-
 Lib/test/test_platform.py             | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/Lib/distutils/tests/test_build_ext.py b/Lib/distutils/tests/test_build_ext.py
index 5e47e0773a964..b259f0de85661 100644
--- a/Lib/distutils/tests/test_build_ext.py
+++ b/Lib/distutils/tests/test_build_ext.py
@@ -492,7 +492,7 @@ def _try_compile_deployment_target(self, operator, target):
         # format the target value as defined in the Apple
         # Availability Macros.  We can't use the macro names since
         # at least one value we test with will not exist yet.
-        if target[1] < 10:
+        if target < (10,10):
             # for 10.1 through 10.9.x -> "10n0"
             target = '%02d%01d0' % target
         else:
diff --git a/Lib/test/test_platform.py b/Lib/test/test_platform.py
index 5ad306e0ed579..45ca08819fb36 100644
--- a/Lib/test/test_platform.py
+++ b/Lib/test/test_platform.py
@@ -246,7 +246,7 @@ def test_mac_ver(self):
             self.assertEqual(res[1], ('', '', ''))
 
             if sys.byteorder == 'little':
-                self.assertIn(res[2], ('i386', 'x86_64'))
+                self.assertIn(res[2], ('i386', 'x86_64', 'arm64'))
             else:
                 self.assertEqual(res[2], 'PowerPC')
 

From 389fcd04abca8e517a9b739c1d426777361ab52f Mon Sep 17 00:00:00 2001
From: "blurb-it[bot]" <43283697+blurb-it[bot]@users.noreply.github.com>
Date: Wed, 1 Jul 2020 17:40:33 +0000
Subject: [PATCH 2/3] =?UTF-8?q?=F0=9F=93=9C=F0=9F=A4=96=20Added=20by=20blu?=
 =?UTF-8?q?rb=5Fit.?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 Misc/NEWS.d/next/Tests/2020-07-01-17-40-32.bpo-41100.lGf8DF.rst | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 Misc/NEWS.d/next/Tests/2020-07-01-17-40-32.bpo-41100.lGf8DF.rst

diff --git a/Misc/NEWS.d/next/Tests/2020-07-01-17-40-32.bpo-41100.lGf8DF.rst b/Misc/NEWS.d/next/Tests/2020-07-01-17-40-32.bpo-41100.lGf8DF.rst
new file mode 100644
index 0000000000000..58fac02c4e15c
--- /dev/null
+++ b/Misc/NEWS.d/next/Tests/2020-07-01-17-40-32.bpo-41100.lGf8DF.rst
@@ -0,0 +1 @@
+test fixes for Mac OS 11
\ No newline at end of file

From 9447ccf974adfe3a038ccf90f1f3202028d62a51 Mon Sep 17 00:00:00 2001
From: Lawrence D'Anna <64555057+lawrence-danna-apple@users.noreply.github.com>
Date: Wed, 1 Jul 2020 19:38:16 -0700
Subject: [PATCH 3/3] Update Lib/distutils/tests/test_build_ext.py

Co-authored-by: Emmanuel Arias <eamanu@yaerobi.com>
---
 Lib/distutils/tests/test_build_ext.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/Lib/distutils/tests/test_build_ext.py b/Lib/distutils/tests/test_build_ext.py
index b259f0de85661..9da7d4090bc3e 100644
--- a/Lib/distutils/tests/test_build_ext.py
+++ b/Lib/distutils/tests/test_build_ext.py
@@ -492,7 +492,7 @@ def _try_compile_deployment_target(self, operator, target):
         # format the target value as defined in the Apple
         # Availability Macros.  We can't use the macro names since
         # at least one value we test with will not exist yet.
-        if target < (10,10):
+        if target < (10, 10):
             # for 10.1 through 10.9.x -> "10n0"
             target = '%02d%01d0' % target
         else:
