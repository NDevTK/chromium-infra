<meta charset="utf-8">
<script src="../bower_components/webcomponentsjs/webcomponents.min.js"></script>
<script src="../bower_components/web-component-tester/browser.js"></script>
<link rel="import" href="../bower_components/iron-test-helpers/iron-test-helpers.html">
<link rel="import" href="../elements/som-extension-build-failure.html">
<test-fixture id="basic">
  <template>
    <som-extension-build-failure></som-extension-build-failure>
  </template>
</test-fixture>
<script>
(function() {
  'use strict';

  suite('basic tests', function() {
    var element;

    setup(function() {
      element = fixture('basic');
    });

    test('renders bare minimum', function() {
      element.extension = {
        builders: [],
        reasons: [],
        regression_ranges: []
      };
      assert.equal(
          'Builders (0)',
          element.$$('paper-item').textContent.trim());
    });
  });

  suite('interaction', function() {
    var element;

    setup(function() {
      element = fixture('basic');
    });

    test('open/close builders', function() {
      element.extension = {
        builders: [
          {
            url: "http://build.example1",
            first_failure: 0,
            latest_failure: 1
          },
          {
            url: "http://build.example2",
            first_failure: 17,
            latest_failure: 41
          },
        ],
        reasons: [],
        regression_ranges: []
      };
      assert.isFalse(element.$.builderList.opened);
      MockInteractions.tap(element.$.toggleBuilders);
      assert.isTrue(element.$.builderList.opened);
      MockInteractions.tap(element.$.toggleBuilders);
      assert.isFalse(element.$.builderList.opened);
    });
  });
})();
</script>
