# Schema for this config file: ProjectConfig in
# luci-config.appspot.com/schemas/projects:tricium-prod.cfg

# TODO(crbug.com/1194244): Tricium config for infra repos should be generated by
# lucicfg and separate for luci-go and luci-py repos.
#
# We would like to include config for luci-py in the infra repo. This cannot be
# trivially done here (at least before crbug/1194244 is resolved) because it
# would involve adding both the luci-py and luci-go repos below, and both the
# luci-py and luci-go builders; and tricium would try to trigger both builders
# for all changes in both repos.
#
# Note: the builder for luci-py is luci-py-analysis in bucket infra/try,
# and should run for Gerrit project infra/luci/luci-py, but otherwise is
# similar to the luci-go setup.

acls {
  role: REQUESTER
  group: "tricium-infra-requesters"
}

functions {
  type: ANALYZER
  name: "LuciGoAnalysis"
  needs: GIT_FILE_DETAILS
  provides: RESULTS
  owner: "qyearsley@chromium.org"
  monorail_component: "Infra>Platform>Tricium>Analyzer"
  impls {
    runtime_platform: LINUX
    provides_for_platform: LINUX
    recipe {
      project: "infra"
      bucket: "try"
      builder: "luci-go-analysis"
    }
  }
}

selections {
  function: "LuciGoAnalysis"
  platform: LINUX
}

repos {
  gerrit_project {
    host: "chromium-review.googlesource.com"
    project: "infra/luci/luci-go"
    git_url: "https://chromium.googlesource.com/infra/luci/luci-go"
  }
}

service_account: "tricium-prod@appspot.gserviceaccount.com"
