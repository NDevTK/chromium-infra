<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/paper-tooltip/paper-tooltip.html">

<dom-module id="day-icon">
  <template>
    <style>
      :host {
        --activity-color: white;
      }
      div {
        background-color: var(--activity-color);
        height: 20px;
        width: 20px;
      }
    </style>
    <div>
      <paper-tooltip>
        [[changes]] CLs<br/>
        [[bugs]] bugs
      </paper-tooltip>
    </div>
  </template>
  <script>
    'use strict';

    class DayIcon extends Polymer.Element {
      static get is() { return 'day-icon'; }

      static get properties() {
        return {
          changes: {
          type: Number,
          value: 0,
          },
          bugs:  {
          type: Number,
          value: 0,
          },
        }
      }

      static get observers() {
        return [
          'computeActivityLevel(changes, bugs)'
        ]
      }

      computeActivityLevel(cls, bugs) {
        const activityNum = (cls + bugs);
        let color;
        if (activityNum >= 7) {
          color = 'rgb(0, 128, 0)';
        } else if (activityNum >= 5) {
          color = 'rgb(0, 255, 0)';
        } else if (activityNum >= 2) {
          color = 'rgb(128, 255, 128)';
        }
        this.updateStyles({'--activity-color': color});
      }
    }
    customElements.define(DayIcon.is, DayIcon);
  </script>
</dom-module>
