<!DOCTYPE html>
<title>Sheriff-o-Matic</title>
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
<meta name="viewport" content="width=device-width, minimum-scale=1.0">
<base href="/">
<script src="scripts/clientmon.js"></script>
<script src="bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>

<script>
window.xsrfToken = '{{.XsrfToken}}';

function loadNonVulcanized() {
  var link = document.createElement('link');
  link.rel = 'import';
  link.href = 'elements/som-app/som-app.html';
  document.documentElement.appendChild(link);
}
</script>
<link rel="import" href="elements/som-app/som-app.vulcanized.html" onerror="loadNonVulcanized()">
<style>
  body {
    font-family: sans-serif;
    overflow: auto;
  }

  .warning-banner {
    background-color: #E75D54;
    font-size: 18px;
    padding: 0.5em 0;
    position: absolute;
    text-align: center;
    bottom: 0;
    left: 0;
    width: 100%;
    z-index: 100;
  }
</style>
{{if .IsStaging}}
<div class="warning-banner">
  This is the staging server. You might want to use the
  <a href="https://sheriff-o-matic.appspot.com/">production server</a>.
</div>
{{end}}
<som-app user="{{.User}}" trees-json="{{.Trees}}" logout-url="{{.LogoutUrl}}" xsrf-token="{{.XsrfToken}}"></som-app>

<script>
  (function(i,s,o,g,r,a,m){i['CrDXObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://storage.googleapis.com/crdx-feedback.appspot.com/feedback.js','crdx');

crdx('setFeedbackButtonLink', 'https://bugs.chromium.org/p/chromium/issues/entry?template=Build%20Infrastructure&components=Infra>Sheriffing>SheriffOMatic&labels=Pri-2&cc=seanmccullough@chromium.org,zhangtiff@chromium.org&comment=Problem+with+Sheriff-o-Matic');

{{if not .IsDevAppServer}}
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', '{{.AnalyticsID}}', 'auto');
  ga('send', 'pageview');
{{end}}
</script>
