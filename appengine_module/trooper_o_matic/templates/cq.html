<!-- Copyright (c) 2014 The Chromium Authors. All rights reserved.
     Use of this source code is governed by a BSD-style license that can be
     found in the LICENSE file. -->
<!doctype html>
<html>
  <head>
    <title>Commit Queue Status</title>
    <link href='//fonts.googleapis.com/css?family=RobotoDraft:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en' rel='stylesheet' type='text/css'>
    <script type='text/javascript' src='//www.google.com/jsapi'></script>
    <script>
      var SINGLE_RUN_DATA = {{ single_run|safe }};
      var QUEUE_TIME_DATA = {{ queue_time|safe }};
      var TOTAL_TIME_DATA = {{ total_time|safe }};
      var LENGTH_DATA = {{ length|safe }};
    </script>
    <style type="text/css">
      body {
        font-family: 'RobotoDraft';
      }
      .chart {
        margin-bottom: 40px;
      }
    </style>
  </head>
  <body>
    <h1>Commit Queue Stats</h1>

    <h2>Times: Single Run</h2>
    <div class="chart" id="single-run-chart"></div>

    <h2>Times: Time in Queue Over All Runs</h2>
    <div class="chart" id="queue-time-chart"></div>

    <h2>Times: Time from Checking "Commit" Box to Complete</h2>
    <div class="chart" id="total-time-chart"></div>

    <h2>Commit Queue Length</h2>
    <div class="chart" id="length-chart"></div>

    <script>
      google.load('visualization', '1.1', {'packages':['annotationchart']});
      google.setOnLoadCallback(drawCharts);
      function drawCharts() {
        drawChart(SINGLE_RUN_DATA, 'single-run-chart');
        drawChart(QUEUE_TIME_DATA, 'queue-time-chart');
        drawChart(TOTAL_TIME_DATA, 'total-time-chart');
        drawChart(LENGTH_DATA, 'length-chart');
      }
      function drawChart(data, id) {
        var dataTable = new google.visualization.DataTable(data);
        var chart = new google.visualization.AnnotationChart(
            document.getElementById(id));
        var options = {
          displayAnnotations: true,
        };

        chart.draw(dataTable, options);
      }
    </script>
  </body>
</html>
